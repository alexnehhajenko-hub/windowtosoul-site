<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Photo ‚Üí Artwork</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <h1>üé® AI Photo ‚Üí Artwork</h1>

  <p>
    Upload your photo and get an AI-generated artwork.<br>
    <small>(–í—Ä–µ–º–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è: –µ—Å–ª–∏ —Ñ–æ—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî –º–æ–¥–µ–ª—å —Å–æ–∑–¥–∞—ë—Ç –ø–æ—Ä—Ç—Ä–µ—Ç –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é.)</small>
  </p>

  <form id="artForm">
    <label>1. Upload photo (optional)</label><br>
    <input type="file" id="photo" accept="image/*"><br><br>

    <label>2. Choose style</label><br>
    <select id="style">
      <option value="oil painting">üñåÔ∏è Oil painting</option>
      <option value="fantasy art">‚ú® Fantasy art</option>
      <option value="realistic">üì∏ Realistic</option>
    </select><br><br>

    <label>3. Extra description (optional)</label><br>
    <input id="prompt" placeholder="For example: golden light, mountains, sunset‚Ä¶"><br><br>

    <button type="submit">Generate Artwork</button>
  </form>

  <p id="status"></p>

  <h2>Your artwork</h2>
  <img id="resultImage" style="max-width: 90%; display: none;" />
  <br>
  <a id="downloadLink" href="#" download="artwork.png" style="display: none;">Download</a>

  <script>
    const form = document.getElementById("artForm");
    const status = document.getElementById("status");
    const resultImage = document.getElementById("resultImage");
    const downloadLink = document.getElementById("downloadLink");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      status.textContent = "‚è≥ Generating...";
      resultImage.style.display = "none";
      downloadLink.style.display = "none";

      const fileInput = document.getElementById("photo");
      const style = document.getElementById("style").value;
      const promptText = document.getElementById("prompt").value;

      const formData = new FormData();
      formData.append("style", style);
      formData.append("prompt", promptText);
      if (fileInput.files.length > 0) {
        formData.append("photo", fileInput.files[0]);
      }

      try {
        const res = await fetch("/api/generate", {
          method: "POST",
          body: formData
        });

        const data = await res.json();

        if (!res.ok) throw new Error(data.error || "Server error");

        resultImage.src = data.output;
        resultImage.style.display = "block";

        downloadLink.href = data.output;
        downloadLink.style.display = "inline-block";

        status.textContent = "";
      } catch (err) {
        status.textContent = "‚ùå Error: " + err.message;
      }
    });
  </script>
</body>
</html>
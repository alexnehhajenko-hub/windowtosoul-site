<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI Oil Portrait</title>
  <link rel="stylesheet" href="/assets/style.css" />
</head>
<body>
  <main class="page">
    <section class="card">
      <h1>üé® AI Oil Portrait</h1>
      <p class="subtitle">
        –°—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è: –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–∞—Å–ª—è–Ω—ã–π –ø–æ—Ä—Ç—Ä–µ—Ç –ø–æ –æ–ø–∏—Å–∞–Ω–∏—é.
        –§–æ—Ç–æ –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞–ª–æ—Å—å. –°–Ω–∞—á–∞–ª–∞ –¥–µ–ª–∞–µ–º –±–∞–∑—É.
      </p>

      <div class="form">
        <label class="label">Describe the portrait (optional)</label>
        <input
          id="promptInput"
          class="input"
          placeholder="For example: young woman in a yellow dress, sunset, mountains behind"
        />

        <button id="generateBtn" class="btn">Generate portrait</button>
        <p id="statusText" class="status"></p>
      </div>

      <h2>Your artwork</h2>
      <div class="result-box" id="resultBox">
        <img id="resultImage" alt="AI artwork result" style="display:none;" />
      </div>
    </section>
  </main>

  <script>
    const promptInput = document.getElementById("promptInput");
    const generateBtn = document.getElementById("generateBtn");
    const statusText = document.getElementById("statusText");
    const resultImage = document.getElementById("resultImage");
    const resultBox = document.getElementById("resultBox");

    generateBtn.addEventListener("click", async () => {
      statusText.textContent = "‚è≥ Generating‚Ä¶";
      generateBtn.disabled = true;
      resultImage.style.display = "none";

      try {
        const res = await fetch("/api/generate", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            prompt: promptInput.value || "",
          }),
        });

        const data = await res.json();

        if (!res.ok || !data.imageUrl) {
          throw new Error(data.error || "Generation failed");
        }

        resultImage.src = data.imageUrl;
        resultImage.style.display = "block";
        statusText.textContent = "";
      } catch (err) {
        console.error(err);
        statusText.textContent = "‚ùå Error: " + (err.message || "Failed");
      } finally {
        generateBtn.disabled = false;
      }
    });
  </script>
</body>
</html>